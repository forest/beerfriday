// NOT YOURS!
(function(a){var b={};window.Strobe=b,b.isNativeApp=window.DeviceInfo&&DeviceInfo.uuid!==undefined,b.urlFor=function(a){var c=a.replace(/^\//,"");return b.isNativeApp?c:"/_strobe/proxy/"+c},b.ajax=function(c,d){return typeof c=="object"&&(d=c,c=undefined),d||(d={}),d.headers||(d.headers={}),c||(c=d.url),c=c.replace(/^https?:\/\//,function(a){return a==="https://"&&(d.headers["X-Strobe-Proxy-Protocol"]="https"),""}),d.url=b.urlFor(c),a.ajax(d)},b.popup=function(b,c,d){d=a.extend({width:600,height:680,scrollbars:!0,location:!0,toolbar:!1,menubar:!1,status:!1},d);var e,f,g=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,h=typeof window.screenY!="undefined"?window.screenY:window.screenTop,i=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,j=typeof window.outerHeight!="undefined"?window.outerHeight:document.documentElement.clientHeight-22,k=parseInt((g<0?window.screen.width+g:g)+(i-d.width)/2,10),l=parseInt(h+(j-d.height)/2.5,10);return f=["width="+d.width,"height="+d.height,"left="+(d.left!=="undefined"?k:d.left),"top="+(d.top!=="undefined"?l:d.top),"scrollbars="+(d.scrollbars?"1":"0"),"location="+(d.location?"1":"0"),"toolbar="+(d.toolbar?"1":"0"),"menubar="+(d.menubar?"1":"0"),"status="+(d.status?"1":"0")],e=window.open(b,c,f.join(",")),e.focus(),e},b.getCookie=function(a,b){b||(b=document.cookie);var c="; "+b+";",d=c.indexOf("; "+a+"=");return d>-1?c.slice(d+=3+a.length,c.indexOf(";",d)):undefined},b.deleteCookie=function(a,b,c){document.cookie=""+a+"="+(b?";path="+b:"")+(c?";domain="+c:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}})(jQuery),function(a,b,c){var d=a.encodeURIComponent,e=c.Social=function(a){var b=function(){},d;return b.prototype=c.Social[a].prototype,d=new b,d.service=a,d},f=e.Twitter=e.twitter=function(){},g=e.Facebook=e.facebook=function(){},h=f.prototype,i=g.prototype;h.tweet=function(a,b){b=b||{},b.type="post",b.data={status:a},this.ajax("1/statuses/update.json",b)},h.ajax=function(a,c){return typeof a=="object"&&(c=a,a=undefined),c||(c={}),a||(a=c.url),c.url=this.urlFor(a),b.ajax(c)},h.urlFor=function(a){return"/_strobe/social/twitter/"+a.replace(/^\//,"")},h.login=function(e,f){e||(e={}),e.oauthCallback||(e.oauthCallback=a.location.protocol+"//"+a.location.host+"/_strobe/social/twitter/callback"),e.interval||(e.interval=100),e.type||(e.type="popup"),f=f===undefined?!0:!1;var g,h,i,j=this,k=e.error,l=e.success;i="/_strobe/social/twitter/authentication?oauth_callback=",i+=d(e.oauthCallback),b.ajax(i,{success:function(b){var d=b.authentication;if(d.status==="unauthenticated")if(f)if(e.type==="popup")h=c.popup(d.authentication_uri,"twitter_authentication"),g=a.setInterval(function(){h.closed&&(a.clearInterval(g),j.login(e,!1))},e.interval);else{a.location=d.authentication_uri;return}else k&&k();else l&&l()},error:e.error})},h.logout=function(a){a||(a={}),b.ajax({type:"DELETE",url:"/_strobe/social/twitter/authentication",success:a.success,error:a.error,complete:a.complete})},i.login=function(b){b||(b={}),b.type||(b.type="popup"),b.interval||(b.interval=100),b.scope||(b.scope=""),b.redirectUri||(b.redirectUri=a.location.protocol+"//"+a.location.host+"/_strobe/social/facebook/callback");var f,g,h;h="https://www.facebook.com/dialog/oauth?response_type=token",h+="&scope="+d(b.scope),h+="&client_id="+d(b.clientId),h+="&redirect_uri="+d(b.redirectUri);switch(b.type){case"redirect":a.location=h;break;case"popup":h+="&display=popup",g=c.popup(h,"facebook_authentication",{width:627,height:326}),f=a.setInterval(function(){g.closed&&(a.clearInterval(f),e.facebook.status({callback:b.callback}))},b.interval);break;default:}},i.logout=function(a){a||(a={}),c.deleteCookie("facebook_access_token","/_strobe/social/facebook"),e.facebook.status({callback:a.callback})},i.status=function(a){a||(a={});var d=b("<iframe>").hide().appendTo(document.body);d.load(function(){var f=c.getCookie("facebook_access_token",d[0].contentWindow.document.cookie),g=b(d[0].contentWindow.document.body).text();e.facebook.ACCESS_TOKEN=f,typeof a.callback=="function"&&a.callback({status:g,accessToken:f}),setTimeout(function(){d.remove()},0)}),d.attr("src","/_strobe/social/facebook/status")},i.urlFor=function(a){return"/_strobe/proxy/graph.facebook.com/"+a.replace(/^\//,"")},e.facebook.send=function(a,c){return c||(c={}),c.headers||(c.headers={}),c.accessToken||(c.accessToken=e.facebook.ACCESS_TOKEN),!c.accessToken&&!e.facebook.hasOwnProperty("ACCESS_TOKEN")?e.facebook.status({callback:function(b){e.facebook.send(a,c)}}):(c.url=e.facebook.urlFor(a),e.facebook.ACCESS_TOKEN&&(c.headers["X-Strobe-Proxy-Protocol"]="https",c.url+=c.url.indexOf("?")===-1?"?access_token=":"&access_token=",c.url+=d(e.facebook.ACCESS_TOKEN)),b.ajax(c))}}(this,jQuery,Strobe)
