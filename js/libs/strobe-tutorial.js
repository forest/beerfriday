(function() {
  var css, downloadURL, html, pathname, platform, strobeInstallInstructions;
  css = "<style type=\"text/css\">\nbody {\n  font-size: 16px;\n  font-family: 'Helvetica Neue', Arial, \"MS Trebuchet\", sans-serif;\n  color: #545454;\n  background-color: #F9F7EC;\n}\n\na:link, a:active, a:visited { color: #ed6323; text-decoration: none;}\n\na:hover {\n  text-decoration: underline;\n}\n\n#container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n#container > div {\n  margin: 17px;\n}\n\n#tutorial {\n  background-color: rgba(0,0,0,0.1);\n  padding:  4px 14px;\n  -webkit-border-radius: 10px;\n}\n\n#code-entry {\n  font-family: monospace;\n  font-size: 13px;\n  width: 80%;\n  height: 150px;\n}\n\np {\n  margin: 13px 0;\n}\n\n.code {\n  background-color: rgb(20,20,20);\n  background-color: rgba(0,0,0,0.8);\n  font-family: monospace;\n  padding: 10px;\n  margin: 4px;\n  display: block;\n  color: #fff;\n  -webkit-border-radius: 10px;\n}\n\n.code > p {\n  margin: 9px;\n}\n\n.code .prompt {\n  color: #555;\n}\n\n.code .result {\n  color: #bbb;\n}\n\n.url {\n  text-align: center;\n  font-size: 30px;\n  margin-bottom: 13px;\n}\n</style>";
  $('head').append(css);
  pathname = window.location.pathname;
  pathname = pathname.slice(0, pathname.lastIndexOf('/'));
  pathname = window.decodeURI(pathname);
  platform = window.navigator.platform;
  if (platform.match(/Win/)) {
    downloadURL = "http://strobe-pkg.strobeapp.com/strobe-latest.exe";
    pathname = pathname.replace(/\//g, "\\");
    pathname = pathname.substring(1);
  } else if (platform.match(/Mac/)) {
    downloadURL = "http://strobe-pkg.strobeapp.com/strobe-latest.pkg";
  }
  if (downloadURL) {
    strobeInstallInstructions = "<p>\n  To get started, download the <tt>strobe</tt> installer package:\n  <div class=\"url\"><a href=\"" + downloadURL + "\">" + downloadURL + "</a></div>\n</p>\n\n<p>Double-click the installer and follow the instructions.</p>";
  } else {
    strobeInstallInstructions = "To install the Strobe command-line interface, use the <tt>gem</tt> command:\n\n<div class=\"code\">\n<span class=\"prompt\">$</span> gem install strobe\n</div>";
  }
  html = "    <div id=\"welcome\">\n      <img src=\"http://starterkit.strobeapp.com/assets/strobe-logo.png\">\n\n      <p>\n        Welcome to the Strobe Starter Kit!\n      </p>\n\n      <p>\n        This tutorial will help you to get started writing apps and deploying them to Strobe.\n      </p>\n\n      <p>This Starter Kit is based on <a href=\"http://html5boilerplate.com/\">HTML5 Boilerplate</a> and includes:</p>\n\n      <ul>\n        <li>jQuery 1.6.2</li>\n        <li>Modernizr 2.0.6</li>\n        <li>IE Compatibility</li>\n      </ul>\n    </div>\n\n    <div id=\"tutorial\">\n      <div id=\"strobe-server\" style=\"display: none;\">\n        <p>\n          I see that you've opened this file by double-clicking the <tt>index.html</tt> file. Great! Now, to really take\n          advantage of Strobe, let's install the <tt>strobe</tt> command-line tool. It's like having all of Strobe running on\n          your computer during development.\n        </p>\n\n        " + strobeInstallInstructions + "\n\n        <p>\n          When you're done, open a command-line window and type:\n        </p>\n\n        <div class=\"code\">\n        <p><span class=\"prompt\">$</span> cd \"" + pathname + "\"</p>\n        <p><span class=\"prompt\">$</span> strobe preview</p>\n        <p><span class=\"result\">&gt;&gt; Thin web server (v1.3.0 codename Double Espresso)</span></p>\n        <p><span class=\"result\">&gt;&gt; Maximum connections set to 1024</span></p>\n        <p><span class=\"result\">&gt;&gt; Listening on 0.0.0.0:9292, CTRL+C to stop</span></p>\n        </div class=\"code\">\n\n        <p>\n          Done? <b>Click below</b> to load this page via the development HTTP server:\n        </p>\n        <div class=\"url\"><a href=\"http://localhost:9292/index.html\">http://localhost:9292</a></div>\n\n      </div>\n      <div id=\"strobe-production\" style=\"display: none;\">\n        <p>\n          Congratulations! Your first application is live and available\n          to the world. Getting apps to your customers is that simple with Strobe.\n        </p>\n\n        <h2>Environments</h2>\n\n        <p>\n          Notice that we added the <tt>--production</tt> flag to the <tt>strobe deploy</tt> command.\n          This tells Strobe to deploy your application to the <em>production environment</em>, where\n          it can be used by your customers.\n        </p>\n\n        <p>\n          Without the <tt>--production</tt> flag, <tt>strobe deploy</tt> will host your application in the\n          <em>staging environment</em>. You can use this environment to test new features before rolling them\n          out to your customers.\n        </p>\n\n        <p>\n          You can see and manage all of your deployments using the Staging\n          and Production tabs in Strobe.\n        </p>\n\n        <img src=\"http://starterkit.strobeapp.com/assets/screenshots/environments.png\" width=\"838\">\n\n        <h2>Platforms</h2>\n\n        <p>\n          You can have Strobe automatically create native iOS and Android versions of your app every time you deploy,\n          which you can submit to the App Store or Android Marketplace.\n        </p>\n\n        <img src=\"http://starterkit.strobeapp.com/assets/screenshots/platforms.png\" width=\"838\">\n\n        <h2>Teams and Organizations</h2>\n\n        <p>\n          Invite others to collaborate with you. Click on the Team panel, then the Invite New People button.\n        </p>\n\n        <p>\n          Enter the e-mails for the people you'd like to be able to access this application. If they're not yet on Strobe,\n          they'll automatically be sent an invitation to join.\n        </p>\n\n        <img src=\"http://starterkit.strobeapp.com/assets/screenshots/teams.png\" width=\"838\">\n\n        <h2>Next Steps</h2>\n\n        <p>\n          If you still have the Strobe browser window open, switch back to it now.\n          If not, visit <a\n            href=\"http://home.strobeapp.com/\">http://home.strobeapp.com</a> to\n          configure additional settings for your application, including:\n        </p>\n\n        <ul>\n          <li>Changing the URL</li>\n          <li>Adding team members who can deploy the application</li>\n          <li>Setting up add-ons, such as integration with social network\n          APIs</li>\n        </ul>\n\n        <p>\n          When you're ready to get started writing your own application, open\n          this directory in your favorite editor and delete the following line from the <tt>index.html</tt> file:\n        </p>\n\n        <div class=\"code\">\n          &lt;script src=\"js/libs/strobe-tutorial.js\"&gt;&lt;/script&gt;\n        </div>\n\n        <p>\n          This will remove all of the tutorial code and leave you with a pristine\n        template.\n        </p>\n\n        <p>Remember, to preview your application, run <tt>strobe preview</tt>. When you want to test it,\n        run <tt>strobe deploy</tt>. When you're ready to push it out ot your customers, type <tt>strobe deploy --production</tt>.\n        </p>\n\n        <p>Happy hacking!</p>\n\n      </div>\n      <div id=\"strobe-localhost\" style=\"display: none;\">\n        <p>\n          Congratulations! You're now seeing this through <tt>strobe preview</tt>, which makes all of the services of Strobe available on your\n          local machine during development.\n        </p>\n\n        <p>\n          One of the features of Strobe is a streaming proxy that allows you to communicate with any server from your JavaScript. Click the <tt>Run Code</tt> button\n          below; your browser will print an error because you are trying to access a server with a different hostname.\n        </p>\n\n        <p>\n          To get this code working, replace <tt>jQuery</tt> with <tt>Strobe</tt> and click <tt>Run Code</tt> again. The <tt>Strobe.ajax()</tt> method will use the streaming proxy to load the requested file.\n        </p>\n\n        <textarea id=\"code-entry\">\njQuery.ajax('http://starterkit.strobeapp.com/welcome.html', {\n  success: function(data) {\n    $('#result').html(data);\n  },\n\n  error: function(e) {\n    $('#result').text(\"There was an error loading the data.\");\n  }\n});\n        </textarea>\n\n        <p>\n          <button id=\"run\">Run Code</button>\n        </p>\n\n        <div id=\"result\">\n        </div>\n      </div>\n    </div>";
  jQuery(function() {
    $('#container').append(html);
    if (window.location.protocol === 'file:') {
      $('#strobe-server').show();
    } else if (window.location.hostname.match(/strobeapp\.com/)) {
      $('#strobe-production').show();
    } else {
      $('#strobe-localhost').show();
    }
    return $('#run').click(function() {
      return window.eval($('textarea').val());
    });
  });
}).call(this);
